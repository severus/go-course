\documentclass[]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Go course},
            pdfauthor={Petr Shevtsov},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\providecommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Go course}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Petr Shevtsov}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{2019-05-16}

\renewcommand{\chaptername}{Module}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}
\addcontentsline{toc}{chapter}{Preface}

The course is targeted at a beginner level student new to Go but might be
familiar with 1-2 other languages (e.g.~Python, HTML).

\hypertarget{basic-concepts}{%
\chapter{Basic Concepts}\label{basic-concepts}}

\hypertarget{what-is-go}{%
\section{What is Go?}\label{what-is-go}}

\hypertarget{hello-world}{%
\section{Hello, world!}\label{hello-world}}

\hypertarget{the-go-cli}{%
\section{The Go CLI}\label{the-go-cli}}

\hypertarget{value-types}{%
\section{Value types}\label{value-types}}

\hypertarget{variables}{%
\section{Variables}\label{variables}}

\hypertarget{operators}{%
\section{Operators}\label{operators}}

\hypertarget{constants}{%
\section{Constants}\label{constants}}

\hypertarget{comments}{%
\section{Comments}\label{comments}}

\hypertarget{packages-and-imports}{%
\section{Packages and imports}\label{packages-and-imports}}

\hypertarget{module-project}{%
\section*{Module project}\label{module-project}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// This is a comment.}
\CommentTok{// Every Go file must be a part of some package.}
\CommentTok{// This file is a part of package main.}
\KeywordTok{package}\NormalTok{ main}

\CommentTok{// We import package "fmt" from the standard Go library.}
\KeywordTok{import} \StringTok{"fmt"}

\CommentTok{// `who` is a constant.}
\KeywordTok{const}\NormalTok{ who = }\StringTok{"world"}

\CommentTok{// Function main() is the main entry point of any application written in Go.}
\KeywordTok{func}\NormalTok{ main() \{}
    \CommentTok{// We declare `greeting` as a variable of type string and assign the value.}
    \KeywordTok{var}\NormalTok{ greeting }\DataTypeTok{string}\NormalTok{ = }\StringTok{"Hello"}
    \CommentTok{// We declare `message` variable using the shorthand syntax. The type of}
    \CommentTok{// the variable is determined by the assigned value. In our case it is}
    \CommentTok{// string type.}
\NormalTok{    message := greeting + }\StringTok{", "}\NormalTok{ + who}
    \CommentTok{// Let's print the value of the variable `message` using the function from}
    \CommentTok{// the package "fmt".}
\NormalTok{    fmt.Println(message)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Hello, world
\end{verbatim}

\hypertarget{conditionals-and-loops}{%
\chapter{Conditionals and Loops}\label{conditionals-and-loops}}

\hypertarget{the-if-statement}{%
\section{\texorpdfstring{The \texttt{if} statement}{The if statement}}\label{the-if-statement}}

\hypertarget{the-else-statement}{%
\section{\texorpdfstring{The \texttt{else} statement}{The else statement}}\label{the-else-statement}}

\hypertarget{ifelse-chains}{%
\section{\texorpdfstring{\texttt{if}/\texttt{else} chains}{if/else chains}}\label{ifelse-chains}}

\hypertarget{the-if-statement-with-expression}{%
\section{\texorpdfstring{The \texttt{if} statement with expression}{The if statement with expression}}\label{the-if-statement-with-expression}}

\hypertarget{the-switch-statement}{%
\section{\texorpdfstring{The \texttt{switch} statement}{The switch statement}}\label{the-switch-statement}}

\hypertarget{the-switch-without-condition}{%
\section{\texorpdfstring{The \texttt{switch} without condition}{The switch without condition}}\label{the-switch-without-condition}}

\hypertarget{the-for-statement}{%
\section{\texorpdfstring{The \texttt{for} statement}{The for statement}}\label{the-for-statement}}

\hypertarget{the-defer-statement}{%
\section{\texorpdfstring{The \texttt{defer} statement}{The defer statement}}\label{the-defer-statement}}

\hypertarget{module-project-1}{%
\section*{Module project}\label{module-project-1}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import} \StringTok{"fmt"}

\KeywordTok{func}\NormalTok{ main() \{}
    \CommentTok{// Here we loop from 0 to 99 and only output some sentences for particular}
    \CommentTok{// cases.}
    \KeywordTok{for}\NormalTok{ age := }\DecValTok{0}\NormalTok{; age < }\DecValTok{99}\NormalTok{; age++ \{}
        \KeywordTok{switch}\NormalTok{ age \{}
        \KeywordTok{case} \DecValTok{16}\NormalTok{:}
\NormalTok{            fmt.Println(}\StringTok{"When you're"}\NormalTok{, age, }\StringTok{"you can drive a car!"}\NormalTok{)}
        \KeywordTok{case} \DecValTok{18}\NormalTok{:}
\NormalTok{            fmt.Println(}\StringTok{"When you're"}\NormalTok{, age, }\StringTok{"you can buy a lottery ticket!"}\NormalTok{)}
        \KeywordTok{case} \DecValTok{21}\NormalTok{:}
\NormalTok{            fmt.Println(}\StringTok{"When you're"}\NormalTok{, age, }\StringTok{"you can buy some beer!"}\NormalTok{)}
            \KeywordTok{break}
        \KeywordTok{default}\NormalTok{:}
            \KeywordTok{continue}
\NormalTok{        \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## When you're 16 you can drive a car!
## When you're 18 you can buy a lottery ticket!
## When you're 21 you can buy some beer!
\end{verbatim}

\hypertarget{composite-data-types}{%
\chapter{Composite Data Types}\label{composite-data-types}}

\hypertarget{arrays}{%
\section{Arrays}\label{arrays}}

\hypertarget{loops-and-arrays}{%
\section{Loops and arrays}\label{loops-and-arrays}}

\hypertarget{slices}{%
\section{Slices}\label{slices}}

\hypertarget{appending-items-to-slices}{%
\section{Appending items to slices}\label{appending-items-to-slices}}

\hypertarget{range}{%
\section{Range}\label{range}}

\hypertarget{maps}{%
\section{Maps}\label{maps}}

\hypertarget{arrays-vs-maps}{%
\section{Arrays vs maps}\label{arrays-vs-maps}}

\hypertarget{structs}{%
\section{Structs}\label{structs}}

\hypertarget{struct-literals}{%
\section{Struct literals}\label{struct-literals}}

\hypertarget{operations-with-structs}{%
\section{Operations with structs}\label{operations-with-structs}}

\hypertarget{module-project-2}{%
\section*{Module project}\label{module-project-2}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import}\NormalTok{ (}
    \StringTok{"fmt"}
    \StringTok{"strings"}
\NormalTok{)}

\CommentTok{// Shakespeare contains the text of one of the Shakespeare's sonets. We'll use}
\CommentTok{// this text to count words in it.}
\KeywordTok{const}\NormalTok{ Shakespeare = }\StringTok{`}
\StringTok{From fairest creatures we desire increase,}
\StringTok{That thereby beauty's rose might never die,}
\StringTok{But as the riper should by time decease,}
\StringTok{His tender heir might bear his memory:}
\StringTok{But thou contracted to thine own bright eyes,}
\StringTok{Feed'st thy light's flame with self-substantial fuel,}
\StringTok{Making a famine where abundance lies,}
\StringTok{Thy self thy foe, to thy sweet self too cruel:}
\StringTok{Thou that art now the world's fresh ornament,}
\StringTok{And only herald to the gaudy spring,}
\StringTok{Within thine own bud buriest thy content,}
\StringTok{And tender churl mak'st waste in niggarding:}
\StringTok{  Pity the world, or else this glutton be,}
\StringTok{  To eat the world's due, by the grave and thee.}
\StringTok{`}

\CommentTok{// getWord returns a word in lower case and with trimmed punctuation.}
\KeywordTok{func}\NormalTok{ getWord(s }\DataTypeTok{string}\NormalTok{) }\DataTypeTok{string}\NormalTok{ \{}
    \KeywordTok{return}\NormalTok{ strings.ToLower(strings.Trim(s, }\StringTok{",:."}\NormalTok{))}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ main() \{}
\NormalTok{    wordCount := }\BuiltInTok{make}\NormalTok{(}\KeywordTok{map}\NormalTok{[}\DataTypeTok{string}\NormalTok{]}\DataTypeTok{int}\NormalTok{)}
    \CommentTok{// Here we loop through the slice of words produced using strings.Fields}
    \CommentTok{// function. That function splits text into a slice of strings using}
    \CommentTok{// space-characters: whitespaces, tabs, new line symbols, etc.}
    \KeywordTok{for}\NormalTok{ _, word := }\KeywordTok{range}\NormalTok{ strings.Fields(Shakespeare) \{}
        \CommentTok{// Trim punctuation and make it lower case.}
\NormalTok{        word = getWord(word)}
        \CommentTok{// Increase the count. If the there was no such word in the map it uses}
        \CommentTok{// zero as its count.}
\NormalTok{        wordCount[word]++}
\NormalTok{    \}}

    \CommentTok{// Loop through the map and print its keys and values.}
    \KeywordTok{for}\NormalTok{ word, count := }\KeywordTok{range}\NormalTok{ wordCount \{}
\NormalTok{        fmt.Println(word, count)}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## thou 2
## feed'st 1
## with 1
## now 1
## or 1
## by 2
## tender 2
## waste 1
## desire 1
## spring 1
## herald 1
## contracted 1
## to 4
## eyes 1
## self-substantial 1
## a 1
## glutton 1
## as 1
## the 6
## but 2
## rose 1
## buriest 1
## world 1
## fairest 1
## thereby 1
## own 2
## where 1
## abundance 1
## self 2
## sweet 1
## cruel 1
## beauty's 1
## die 1
## and 3
## making 1
## foe 1
## niggarding 1
## thine 2
## content 1
## churl 1
## world's 2
## bud 1
## bear 1
## memory 1
## fuel 1
## within 1
## mak'st 1
## creatures 1
## riper 1
## art 1
## pity 1
## else 1
## this 1
## eat 1
## never 1
## flame 1
## bright 1
## light's 1
## famine 1
## too 1
## fresh 1
## ornament 1
## should 1
## time 1
## be 1
## heir 1
## gaudy 1
## thee 1
## from 1
## his 2
## decease 1
## lies 1
## only 1
## due 1
## we 1
## might 2
## thy 5
## in 1
## grave 1
## increase 1
## that 2
\end{verbatim}

\hypertarget{functions-and-pointers}{%
\chapter{Functions and pointers}\label{functions-and-pointers}}

\hypertarget{function-declaration}{%
\section{Function declaration}\label{function-declaration}}

\hypertarget{functions-parameters}{%
\section{Functions parameters}\label{functions-parameters}}

\hypertarget{return-values}{%
\section{Return values}\label{return-values}}

\hypertarget{error-handling}{%
\section{Error handling}\label{error-handling}}

\hypertarget{variadic-functions}{%
\section{Variadic functions}\label{variadic-functions}}

\hypertarget{iteration-and-recursion}{%
\section{Iteration and recursion}\label{iteration-and-recursion}}

\hypertarget{anonymous-functions}{%
\section{Anonymous functions}\label{anonymous-functions}}

\hypertarget{panic}{%
\section{Panic}\label{panic}}

\hypertarget{pointers}{%
\section{Pointers}\label{pointers}}

\hypertarget{functions-and-pointers-1}{%
\section{Functions and pointers}\label{functions-and-pointers-1}}

\hypertarget{module-project-3}{%
\section*{Module project}\label{module-project-3}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import} \StringTok{"fmt"}

\CommentTok{// fibonacci returns the nth Fibonacci number.}
\KeywordTok{func}\NormalTok{ fibonacci(n }\DataTypeTok{int}\NormalTok{) }\DataTypeTok{int}\NormalTok{ \{}
    \KeywordTok{if}\NormalTok{ n < }\DecValTok{2}\NormalTok{ \{}
        \KeywordTok{return}\NormalTok{ n}
\NormalTok{    \}}
    \KeywordTok{return}\NormalTok{ fibonacci(n}\DecValTok{-1}\NormalTok{) + fibonacci(n}\DecValTok{-2}\NormalTok{)}
\NormalTok{\}}

\CommentTok{// fibonacciSequence changes the int slice to make it contain the Fibonacci}
\CommentTok{// numbers according to its keys. This function operates on the actual slice,}
\CommentTok{// that's why it does not return anything.}
\KeywordTok{func}\NormalTok{ fibonacciSequence(slice []}\DataTypeTok{int}\NormalTok{) \{}
    \KeywordTok{for}\NormalTok{ n := }\KeywordTok{range}\NormalTok{ slice \{}
\NormalTok{        slice[n] = fibonacci(n)}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ main() \{}
    \CommentTok{// Create an empty int slice of length 10}
\NormalTok{    sequence := }\BuiltInTok{make}\NormalTok{([]}\DataTypeTok{int}\NormalTok{, }\DecValTok{10}\NormalTok{)}
    \CommentTok{// Fill the slice with Fibonacci numbers secuence}
\NormalTok{    fibonacciSequence(sequence)}

\NormalTok{    fmt.Println(sequence)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [0 1 1 2 3 5 8 13 21 34]
\end{verbatim}

\hypertarget{methods}{%
\chapter{Methods}\label{methods}}

\hypertarget{method-declarations}{%
\section{Method declarations}\label{method-declarations}}

\hypertarget{methods-with-a-pointer-receiver}{%
\section{Methods with a pointer receiver}\label{methods-with-a-pointer-receiver}}

\hypertarget{composing-types-with-structs}{%
\section{Composing types with structs}\label{composing-types-with-structs}}

\hypertarget{working-with-struct-methods}{%
\section{Working with struct methods}\label{working-with-struct-methods}}

\hypertarget{method-values}{%
\section{Method values}\label{method-values}}

\hypertarget{method-expressions}{%
\section{Method expressions}\label{method-expressions}}

\hypertarget{encapsulation}{%
\section{Encapsulation}\label{encapsulation}}

\hypertarget{module-project-4}{%
\section*{Module project}\label{module-project-4}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import}\NormalTok{ (}
    \StringTok{"fmt"}
\NormalTok{)}

\CommentTok{// printer is a struct with no fields. It only has a method.}
\KeywordTok{type}\NormalTok{ printer }\KeywordTok{struct}\NormalTok{\{\}}

\CommentTok{// receipt is a variadic function. It can be called with any number of}
\CommentTok{// arguments, just like fmt.Println()}
\KeywordTok{func}\NormalTok{ (p printer) receipt(a ...}\KeywordTok{interface}\NormalTok{\{\}) \{}
\NormalTok{    fmt.Println(a...)}
\NormalTok{\}}

\CommentTok{// Account represents a bank account data structure, it has one field and an}
\CommentTok{// embedded struct.}
\KeywordTok{type}\NormalTok{ Account }\KeywordTok{struct}\NormalTok{ \{}
\NormalTok{    balance }\DataTypeTok{int}
\NormalTok{    printer}
\NormalTok{\}}

\CommentTok{// NewAccount created a new Account setting the initial balance.}
\KeywordTok{func}\NormalTok{ NewAccount(balance }\DataTypeTok{int}\NormalTok{) *Account \{}
    \KeywordTok{return}\NormalTok{ &Account\{}
\NormalTok{        balance: balance,}
\NormalTok{    \}}
\NormalTok{\}}

\CommentTok{// Deposit increases the account balance by the specified amount.}
\CommentTok{// It prints the information about the operation using the method of the}
\CommentTok{// embedded printer struct.}
\KeywordTok{func}\NormalTok{ (a *Account) Deposit(amount }\DataTypeTok{int}\NormalTok{) \{}
\NormalTok{    a.receipt(}\StringTok{"--> trying to deposit"}\NormalTok{, amount)}
\NormalTok{    a.balance = a.balance + amount}
\NormalTok{\}}

\CommentTok{// Withdraw checks if the account balance is not lesser than the amount to}
\CommentTok{// withdraw and decreses the balance by the specified amount.}
\CommentTok{// It prints the information about the operation using the method of the}
\CommentTok{// embedded printer struct.}
\KeywordTok{func}\NormalTok{ (a *Account) Withdraw(amount }\DataTypeTok{int}\NormalTok{) \{}
\NormalTok{    a.receipt(}\StringTok{"<-- trying to withdraw"}\NormalTok{, amount)}
    \KeywordTok{if}\NormalTok{ amount > a.balance \{}
\NormalTok{        a.receipt(}\StringTok{"Withdraw error: not enough funds to withdraw"}\NormalTok{, amount)}
        \KeywordTok{return}
\NormalTok{    \}}
\NormalTok{    a.balance = a.balance - amount}
\NormalTok{\}}

\CommentTok{// Balance outputs the account balance using the Method of the embedded printer}
\CommentTok{// struct.}
\KeywordTok{func}\NormalTok{ (a Account) Balance() \{}
\NormalTok{    a.receipt(}\StringTok{"Account balance:"}\NormalTok{, a.balance)}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ main() \{}
\NormalTok{    account := NewAccount(}\DecValTok{100}\NormalTok{)}
\NormalTok{    account.Balance()}

\NormalTok{    account.Withdraw(}\DecValTok{25}\NormalTok{)}
\NormalTok{    account.Balance()}

\NormalTok{    account.Deposit(}\DecValTok{50}\NormalTok{)}
\NormalTok{    account.Balance()}

\NormalTok{    account.Withdraw(}\DecValTok{1000}\NormalTok{)}
\NormalTok{    account.Balance()}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Account balance: 100
## <-- trying to withdraw 25
## Account balance: 75
## --> trying to deposit 50
## Account balance: 125
## <-- trying to withdraw 1000
## Withdraw error: not enough funds to withdraw 1000
## Account balance: 125
\end{verbatim}

\hypertarget{interfaces}{%
\chapter{Interfaces}\label{interfaces}}

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

\hypertarget{interface-types}{%
\section{Interface types}\label{interface-types}}

\hypertarget{satisfaction}{%
\section{Satisfaction}\label{satisfaction}}

\hypertarget{flag.value}{%
\section{\texorpdfstring{\texttt{flag.Value}}{flag.Value}}\label{flag.value}}

\hypertarget{interface-values}{%
\section{Interface values}\label{interface-values}}

\hypertarget{sorting-with-sort.interface}{%
\section{\texorpdfstring{Sorting with \texttt{sort.Interface}}{Sorting with sort.Interface}}\label{sorting-with-sort.interface}}

\hypertarget{the-error-interface}{%
\section{\texorpdfstring{The \texttt{error} interface}{The error interface}}\label{the-error-interface}}

\hypertarget{type-assertions}{%
\section{Type assertions}\label{type-assertions}}

\hypertarget{type-switches}{%
\section{Type switches}\label{type-switches}}

\hypertarget{module-project-5}{%
\section*{Module project}\label{module-project-5}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import}\NormalTok{ (}
    \StringTok{"bufio"}
    \StringTok{"fmt"}
    \StringTok{"io"}
    \StringTok{"sort"}
    \StringTok{"strings"}
\NormalTok{)}

\CommentTok{// Shakespeare contains the text of one of the Shakespeare's sonets. We'll use}
\CommentTok{// this text to count words in it.}
\KeywordTok{const}\NormalTok{ Shakespeare = }\StringTok{`}
\StringTok{From fairest creatures we desire increase,}
\StringTok{That thereby beauty's rose might never die,}
\StringTok{But as the riper should by time decease,}
\StringTok{His tender heir might bear his memory:}
\StringTok{But thou contracted to thine own bright eyes,}
\StringTok{Feed'st thy light's flame with self-substantial fuel,}
\StringTok{Making a famine where abundance lies,}
\StringTok{Thy self thy foe, to thy sweet self too cruel:}
\StringTok{Thou that art now the world's fresh ornament,}
\StringTok{And only herald to the gaudy spring,}
\StringTok{Within thine own bud buriest thy content,}
\StringTok{And tender churl mak'st waste in niggarding:}
\StringTok{  Pity the world, or else this glutton be,}
\StringTok{  To eat the world's due, by the grave and thee.}
\StringTok{`}

\CommentTok{// WordCountPair is a record of word and its count.}
\KeywordTok{type}\NormalTok{ WordCountPair }\KeywordTok{struct}\NormalTok{ \{}
\NormalTok{    Word  }\DataTypeTok{string}
\NormalTok{    Count }\DataTypeTok{int}
\NormalTok{\}}

\CommentTok{// getWord returns a word in lower case and with trimmed punctuation.}
\KeywordTok{func}\NormalTok{ getWord(s }\DataTypeTok{string}\NormalTok{) }\DataTypeTok{string}\NormalTok{ \{}
    \KeywordTok{return}\NormalTok{ strings.ToLower(strings.Trim(s, }\StringTok{",:."}\NormalTok{))}
\NormalTok{\}}

\CommentTok{// Functions can be types too!}
\KeywordTok{type}\NormalTok{ lessFunc }\KeywordTok{func}\NormalTok{(p1, p2 *WordCountPair) }\DataTypeTok{bool}

\CommentTok{// multiSorter implements the Sort interface, sorting the word-count pairs.}
\KeywordTok{type}\NormalTok{ multiSorter }\KeywordTok{struct}\NormalTok{ \{}
\NormalTok{    wordCountPairs []WordCountPair}
\NormalTok{    less           []lessFunc}
\NormalTok{\}}

\CommentTok{// Sort sorts the argument slice according to the less functions passed to}
\CommentTok{// OrderedBy.}
\KeywordTok{func}\NormalTok{ (ms *multiSorter) Sort(wordCountPairs []WordCountPair) \{}
\NormalTok{    ms.wordCountPairs = wordCountPairs}
\NormalTok{    sort.Sort(ms)}
\NormalTok{\}}

\CommentTok{// OrderedBy returns a Sorter that sorts using the less functions, in order.}
\CommentTok{// Call its Sort method to sort the data.}
\KeywordTok{func}\NormalTok{ OrderedBy(less ...lessFunc) *multiSorter \{}
    \KeywordTok{return}\NormalTok{ &multiSorter\{}
\NormalTok{        less: less,}
\NormalTok{    \}}
\NormalTok{\}}

\CommentTok{// Len is part of sort.Interface.}
\KeywordTok{func}\NormalTok{ (ms *multiSorter) Len() }\DataTypeTok{int}\NormalTok{ \{}
    \KeywordTok{return} \BuiltInTok{len}\NormalTok{(ms.wordCountPairs)}
\NormalTok{\}}

\CommentTok{// Swap is part of sort.Interface.}
\KeywordTok{func}\NormalTok{ (ms *multiSorter) Swap(i, j }\DataTypeTok{int}\NormalTok{) \{}
\NormalTok{    ms.wordCountPairs[i], ms.wordCountPairs[j] =}
\NormalTok{        ms.wordCountPairs[j], ms.wordCountPairs[i]}
\NormalTok{\}}

\CommentTok{// Less is part of sort.Interface. It is implemented by looping along the less}
\CommentTok{// functions until it finds a comparison the discriminates between the two items}
\CommentTok{// (one is less than the other).}
\KeywordTok{func}\NormalTok{ (ms *multiSorter) Less(i, j }\DataTypeTok{int}\NormalTok{) }\DataTypeTok{bool}\NormalTok{ \{}
\NormalTok{    p, q := &ms.wordCountPairs[i], &ms.wordCountPairs[j]}
    \CommentTok{// Try all but the last comparison.}
    \KeywordTok{var}\NormalTok{ k }\DataTypeTok{int}
    \KeywordTok{for}\NormalTok{ k = }\DecValTok{0}\NormalTok{; k < }\BuiltInTok{len}\NormalTok{(ms.less)-}\DecValTok{1}\NormalTok{; k++ \{}
\NormalTok{        less := ms.less[k]}
        \KeywordTok{switch}\NormalTok{ \{}
        \KeywordTok{case}\NormalTok{ less(p, q):}
            \CommentTok{// p < q, so we have a decision.}
            \KeywordTok{return} \OtherTok{true}
        \KeywordTok{case}\NormalTok{ less(q, p):}
            \CommentTok{// p > q, so we have a decision.}
            \KeywordTok{return} \OtherTok{false}
\NormalTok{        \}}
        \CommentTok{// p == q; try the next comparison.}
\NormalTok{    \}}
    \CommentTok{// All comparisons to here said "equal", so just return whatever the final}
    \CommentTok{// comparison reports.}
    \KeywordTok{return}\NormalTok{ ms.less[k](p, q)}
\NormalTok{\}}

\CommentTok{// WordCount counts words read from input (io.Reader interface) and returns the}
\CommentTok{// word-count pairs.}
\KeywordTok{func}\NormalTok{ WordCount(input io.Reader) []WordCountPair \{}
\NormalTok{    m := }\BuiltInTok{make}\NormalTok{(}\KeywordTok{map}\NormalTok{[}\DataTypeTok{string}\NormalTok{]}\DataTypeTok{int}\NormalTok{)}
\NormalTok{    scanner := bufio.NewScanner(input)}
\NormalTok{    scanner.Split(bufio.ScanWords)}
    \KeywordTok{for}\NormalTok{ scanner.Scan() \{}
        \CommentTok{// Read a word using word scanner, trim punctuation and make it lower case.}
\NormalTok{        word := getWord(scanner.Text())}
        \CommentTok{// Increase the count. If the there was no such word in the map it uses}
        \CommentTok{// zero as its count.}
\NormalTok{        m[word]++}
\NormalTok{    \}}

    \CommentTok{// Create a slice the same length as the word-count map.}
\NormalTok{    pairs := }\BuiltInTok{make}\NormalTok{([]WordCountPair, }\BuiltInTok{len}\NormalTok{(m))}

    \CommentTok{// Fill the silce with data from the map.}
\NormalTok{    i := }\DecValTok{0}
    \KeywordTok{for}\NormalTok{ word, count := }\KeywordTok{range}\NormalTok{ m \{}
\NormalTok{        pairs[i] = WordCountPair\{Word: word, Count: count\}}
\NormalTok{        i++}
\NormalTok{    \}}

    \KeywordTok{return}\NormalTok{ pairs}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ main() \{}
\NormalTok{    input := strings.NewReader(Shakespeare)}
\NormalTok{    pairs := WordCount(input)}

    \CommentTok{// Closures that order the WordCountPair structure.}
\NormalTok{    word := }\KeywordTok{func}\NormalTok{(p1, p2 *WordCountPair) }\DataTypeTok{bool}\NormalTok{ \{}
        \KeywordTok{return}\NormalTok{ p1.Word < p2.Word}
\NormalTok{    \}}
\NormalTok{    count := }\KeywordTok{func}\NormalTok{(p1, p2 *WordCountPair) }\DataTypeTok{bool}\NormalTok{ \{}
        \KeywordTok{return}\NormalTok{ p1.Count > p2.Count }\CommentTok{// Note: > orders downward.}
\NormalTok{    \}}

\NormalTok{    OrderedBy(count, word).Sort(pairs)}

    \KeywordTok{for}\NormalTok{ _, pair := }\KeywordTok{range}\NormalTok{ pairs \{}
\NormalTok{        fmt.Println(pair.Word, pair.Count)}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## the 6
## thy 5
## to 4
## and 3
## but 2
## by 2
## his 2
## might 2
## own 2
## self 2
## tender 2
## that 2
## thine 2
## thou 2
## world's 2
## a 1
## abundance 1
## art 1
## as 1
## be 1
## bear 1
## beauty's 1
## bright 1
## bud 1
## buriest 1
## churl 1
## content 1
## contracted 1
## creatures 1
## cruel 1
## decease 1
## desire 1
## die 1
## due 1
## eat 1
## else 1
## eyes 1
## fairest 1
## famine 1
## feed'st 1
## flame 1
## foe 1
## fresh 1
## from 1
## fuel 1
## gaudy 1
## glutton 1
## grave 1
## heir 1
## herald 1
## in 1
## increase 1
## lies 1
## light's 1
## mak'st 1
## making 1
## memory 1
## never 1
## niggarding 1
## now 1
## only 1
## or 1
## ornament 1
## pity 1
## riper 1
## rose 1
## self-substantial 1
## should 1
## spring 1
## sweet 1
## thee 1
## thereby 1
## this 1
## time 1
## too 1
## waste 1
## we 1
## where 1
## with 1
## within 1
## world 1
\end{verbatim}

\hypertarget{goroutines-and-channels}{%
\chapter{Goroutines and channels}\label{goroutines-and-channels}}

\hypertarget{what-is-goroutine}{%
\section{What is goroutine}\label{what-is-goroutine}}

\hypertarget{introduction-to-concurrency}{%
\section{Introduction to concurrency}\label{introduction-to-concurrency}}

\hypertarget{channels}{%
\section{Channels}\label{channels}}

\hypertarget{types-of-channels}{%
\section{Types of channels}\label{types-of-channels}}

\hypertarget{pipelines}{%
\section{Pipelines}\label{pipelines}}

\hypertarget{looping-in-parallel}{%
\section{Looping in parallel}\label{looping-in-parallel}}

\hypertarget{time.tick}{%
\section{\texorpdfstring{\texttt{time.Tick}}{time.Tick}}\label{time.tick}}

\hypertarget{the-select-statement}{%
\section{\texorpdfstring{The \texttt{select} statement}{The select statement}}\label{the-select-statement}}

\hypertarget{cancellation}{%
\section{Cancellation}\label{cancellation}}

\hypertarget{module-project-6}{%
\section*{Module project}\label{module-project-6}}
\addcontentsline{toc}{section}{Module project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import}\NormalTok{ (}
    \StringTok{"fmt"}
    \StringTok{"math/rand"}
    \StringTok{"sync"}
    \StringTok{"time"}
\NormalTok{)}

\KeywordTok{const}\NormalTok{ (}
\NormalTok{    NumberOfRacers   = }\DecValTok{10}
\NormalTok{    NumberOfLaps     = }\DecValTok{3}
\NormalTok{    MaxSleepDuration = }\DecValTok{3} \CommentTok{// seconds}
\NormalTok{)}

\KeywordTok{func}\NormalTok{ init() \{}
\NormalTok{    rand.Seed(time.Now().UnixNano())}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ race(racer }\DataTypeTok{int}\NormalTok{, start }\KeywordTok{chan} \KeywordTok{struct}\NormalTok{\{\}, finish }\KeywordTok{chan} \DataTypeTok{int}\NormalTok{, status }\KeywordTok{chan}\NormalTok{ []}\DataTypeTok{int}\NormalTok{, wg *sync.WaitGroup) \{}
    \KeywordTok{defer}\NormalTok{ wg.Done()}
\NormalTok{    <-start}
    \KeywordTok{for}\NormalTok{ lap := }\DecValTok{1}\NormalTok{; lap <= NumberOfLaps; lap++ \{}
\NormalTok{        sleep := time.Duration(rand.Intn(MaxSleepDuration))}
\NormalTok{        time.Sleep(sleep * time.Second)}
        \KeywordTok{go} \KeywordTok{func}\NormalTok{(racer, lap }\DataTypeTok{int}\NormalTok{) \{}
\NormalTok{            status <- []}\DataTypeTok{int}\NormalTok{\{racer, lap\}}
\NormalTok{        \}(racer, lap)}
\NormalTok{    \}}
\NormalTok{    finish <- racer}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ main() \{}
\NormalTok{    start := }\BuiltInTok{make}\NormalTok{(}\KeywordTok{chan} \KeywordTok{struct}\NormalTok{\{\})}
\NormalTok{    finish := }\BuiltInTok{make}\NormalTok{(}\KeywordTok{chan} \DataTypeTok{int}\NormalTok{)}
\NormalTok{    status := }\BuiltInTok{make}\NormalTok{(}\KeywordTok{chan}\NormalTok{ []}\DataTypeTok{int}\NormalTok{)}
\NormalTok{    done := }\BuiltInTok{make}\NormalTok{(}\KeywordTok{chan} \KeywordTok{struct}\NormalTok{\{\})}
    \KeywordTok{var}\NormalTok{ wg sync.WaitGroup}
\NormalTok{    wg.Add(NumberOfRacers)}
    \KeywordTok{for}\NormalTok{ racer := }\DecValTok{1}\NormalTok{; racer <= NumberOfRacers; racer++ \{}
        \KeywordTok{go}\NormalTok{ race(racer, start, finish, status, &wg)}
\NormalTok{    \}}

    \KeywordTok{go} \KeywordTok{func}\NormalTok{() \{}
\NormalTok{        wg.Wait()}
        \BuiltInTok{close}\NormalTok{(done)}
\NormalTok{    \}()}

\NormalTok{    startTime := time.Now()}
    \BuiltInTok{close}\NormalTok{(start)}

\NormalTok{    ticker := time.NewTicker(time.Second)}
    \KeywordTok{defer}\NormalTok{ ticker.Stop()}

    \KeywordTok{var}\NormalTok{ winners []}\DataTypeTok{int}

\NormalTok{OuterLoop:}
    \KeywordTok{for}\NormalTok{ \{}
        \KeywordTok{select}\NormalTok{ \{}
        \KeywordTok{case}\NormalTok{ t := <-ticker.C:}
\NormalTok{            fmt.Println(}\StringTok{"Race time:"}\NormalTok{, t.Sub(startTime))}
        \KeywordTok{case}\NormalTok{ s := <-status:}
\NormalTok{            fmt.Printf(}\StringTok{"Racer #%d is on lap %d}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, s[}\DecValTok{0}\NormalTok{], s[}\DecValTok{1}\NormalTok{])}
        \KeywordTok{case}\NormalTok{ finished := <-finish:}
\NormalTok{            fmt.Printf(}\StringTok{"Racer #%d finished!}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, finished)}
            \KeywordTok{if} \BuiltInTok{len}\NormalTok{(winners) < }\DecValTok{3}\NormalTok{ \{}
\NormalTok{                winners = }\BuiltInTok{append}\NormalTok{(winners, finished)}
\NormalTok{            \}}
        \KeywordTok{case}\NormalTok{ <-done:}
            \KeywordTok{break}\NormalTok{ OuterLoop}
\NormalTok{        \}}
\NormalTok{    \}}

    \BuiltInTok{close}\NormalTok{(finish)}
    \BuiltInTok{close}\NormalTok{(status)}

\NormalTok{    fmt.Println(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{Winners:"}\NormalTok{)}
\NormalTok{    place := }\DecValTok{1}
    \KeywordTok{for}\NormalTok{ _, racer := }\KeywordTok{range}\NormalTok{ winners \{}
\NormalTok{        fmt.Printf(}\StringTok{"%d place: Racer #%d}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, place, racer)}
\NormalTok{        place++}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Racer #2 is on lap 2
## Racer #3 is on lap 1
## Racer #4 is on lap 1
## Racer #5 is on lap 1
## Racer #2 is on lap 1
## Race time: 1.000111085s
## Racer #10 is on lap 1
## Racer #1 is on lap 1
## Racer #2 finished!
## Racer #3 finished!
## Racer #4 is on lap 2
## Racer #5 is on lap 2
## Racer #7 is on lap 2
## Racer #9 is on lap 1
## Racer #2 is on lap 3
## Racer #3 is on lap 2
## Racer #3 is on lap 3
## Racer #7 is on lap 1
## Race time: 2.000316665s
## Racer #7 is on lap 3
## Racer #7 finished!
## Racer #6 is on lap 1
## Racer #8 finished!
## Racer #4 finished!
## Racer #8 is on lap 1
## Racer #8 is on lap 2
## Racer #8 is on lap 3
## Racer #4 is on lap 3
## Race time: 3.000266783s
## Racer #9 is on lap 2
## Racer #10 is on lap 2
## Racer #1 finished!
## Racer #5 finished!
## Racer #1 is on lap 2
## Racer #1 is on lap 3
## Racer #5 is on lap 3
## Racer #6 finished!
## Racer #6 is on lap 2
## Racer #6 is on lap 3
## Race time: 4.000161627s
## Racer #10 finished!
## Racer #10 is on lap 3
## Race time: 5.000189757s
## Racer #9 finished!
## Racer #9 is on lap 3
## 
## Winners:
## 1 place: Racer #2
## 2 place: Racer #3
## 3 place: Racer #7
\end{verbatim}

\hypertarget{course-project}{%
\chapter*{Course project}\label{course-project}}
\addcontentsline{toc}{chapter}{Course project}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{package}\NormalTok{ main}

\KeywordTok{import}\NormalTok{ (}
    \StringTok{"encoding/csv"}
    \StringTok{"fmt"}
    \StringTok{"io"}
    \StringTok{"log"}
    \StringTok{"os"}
    \StringTok{"strconv"}
    \StringTok{"strings"}
\NormalTok{)}

\KeywordTok{func}\NormalTok{ main() \{}
    \KeywordTok{var}\NormalTok{ input io.Reader}

    \KeywordTok{switch} \BuiltInTok{len}\NormalTok{(os.Args) \{}
    \KeywordTok{case} \DecValTok{1}\NormalTok{:}
\NormalTok{        input = os.Stdin}
    \KeywordTok{case} \DecValTok{2}\NormalTok{:}
\NormalTok{        f, err := os.Open(os.Args[}\DecValTok{1}\NormalTok{])}
        \KeywordTok{if}\NormalTok{ err != }\OtherTok{nil}\NormalTok{ \{}
\NormalTok{            log.Fatal(err)}
\NormalTok{        \}}
        \KeywordTok{defer}\NormalTok{ f.Close()}
\NormalTok{        input = f}
    \KeywordTok{default}\NormalTok{:}
\NormalTok{        log.Fatal(}\StringTok{"This program expects either 0 or 1 arguments."}\NormalTok{)}
\NormalTok{    \}}

\NormalTok{    r := csv.NewReader(input)}
\NormalTok{    r.FieldsPerRecord = }\DecValTok{-1}

\NormalTok{    records, err := r.ReadAll()}
    \KeywordTok{if}\NormalTok{ err != }\OtherTok{nil}\NormalTok{ \{}
\NormalTok{        log.Fatal(err)}
\NormalTok{    \}}

    \CommentTok{// Remove the very first "record" (i.e 'Category: All categories') if exists}
    \KeywordTok{if} \BuiltInTok{len}\NormalTok{(records[}\DecValTok{0}\NormalTok{]) == }\DecValTok{1}\NormalTok{ \{}
\NormalTok{        records = }\BuiltInTok{append}\NormalTok{(records[:}\DecValTok{0}\NormalTok{], records[}\DecValTok{1}\NormalTok{:]...)}
\NormalTok{    \}}

    \CommentTok{// Save names to a slice}
\NormalTok{    names := records[}\DecValTok{0}\NormalTok{][}\DecValTok{1}\NormalTok{:] }\CommentTok{// Skip 'weeks' column}
\NormalTok{    commonSuffix := longestCommonSuffix(names)}
    \KeywordTok{if}\NormalTok{ commonSuffix != }\StringTok{""}\NormalTok{ \{}
        \KeywordTok{for}\NormalTok{ i, name := }\KeywordTok{range}\NormalTok{ names \{}
\NormalTok{            names[i] = strings.TrimSuffix(name, commonSuffix)}
\NormalTok{        \}}
\NormalTok{    \}}
\NormalTok{    records = }\BuiltInTok{append}\NormalTok{(records[:}\DecValTok{0}\NormalTok{], records[}\DecValTok{1}\NormalTok{:]...)}

\NormalTok{    avg := }\BuiltInTok{make}\NormalTok{([]}\DataTypeTok{int}\NormalTok{, }\BuiltInTok{len}\NormalTok{(names))}

    \KeywordTok{for}\NormalTok{ _, record := }\KeywordTok{range}\NormalTok{ records \{}
\NormalTok{        record = record[}\DecValTok{1}\NormalTok{:] }\CommentTok{// Skip 'weeks' column}
        \KeywordTok{for}\NormalTok{ i, s := }\KeywordTok{range}\NormalTok{ record \{}
\NormalTok{            n, err := strconv.Atoi(s)}
            \KeywordTok{if}\NormalTok{ err != }\OtherTok{nil}\NormalTok{ \{}
\NormalTok{                log.Fatal(err)}
\NormalTok{            \}}
\NormalTok{            avg[i] += n}
\NormalTok{        \}}
\NormalTok{    \}}

    \KeywordTok{for}\NormalTok{ i := }\DecValTok{0}\NormalTok{; i < }\BuiltInTok{len}\NormalTok{(avg); i++ \{}
\NormalTok{        avg[i] = avg[i] / }\BuiltInTok{len}\NormalTok{(records)}
\NormalTok{    \}}

    \KeywordTok{for}\NormalTok{ i, n := }\KeywordTok{range}\NormalTok{ avg \{}
\NormalTok{        n = n/}\DecValTok{10}\NormalTok{ + }\DecValTok{1}
\NormalTok{        fmt.Printf(}\StringTok{"%s %s (%d)}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, strings.Repeat(}\StringTok{"▓"}\NormalTok{, n), names[i], avg[i])}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{func}\NormalTok{ longestCommonSuffix(a []}\DataTypeTok{string}\NormalTok{) }\DataTypeTok{string}\NormalTok{ \{}
    \KeywordTok{if} \BuiltInTok{len}\NormalTok{(a) == }\DecValTok{0}\NormalTok{ \{}
        \KeywordTok{return} \StringTok{""}
\NormalTok{    \}}

\NormalTok{    suffix := a[}\DecValTok{0}\NormalTok{]}
    \KeywordTok{if} \BuiltInTok{len}\NormalTok{(a) == }\DecValTok{1}\NormalTok{ \{}
        \KeywordTok{return}\NormalTok{ suffix}
\NormalTok{    \}}

    \KeywordTok{for}\NormalTok{ _, s := }\KeywordTok{range}\NormalTok{ a[}\DecValTok{1}\NormalTok{:] \{}
\NormalTok{        suffixLength := }\BuiltInTok{len}\NormalTok{(suffix)}
\NormalTok{        sLength := }\BuiltInTok{len}\NormalTok{(s)}

        \KeywordTok{if}\NormalTok{ suffixLength == }\DecValTok{0}\NormalTok{ || sLength == }\DecValTok{0}\NormalTok{ \{}
            \KeywordTok{return} \StringTok{""}
\NormalTok{        \}}

\NormalTok{        maxLength := suffixLength}
        \KeywordTok{if}\NormalTok{ sLength < maxLength \{}
\NormalTok{            maxLength = sLength}
\NormalTok{        \}}

        \KeywordTok{for}\NormalTok{ i := }\DecValTok{0}\NormalTok{; i < maxLength; i++ \{}
\NormalTok{            j := suffixLength - i - }\DecValTok{1}
\NormalTok{            k := sLength - i - }\DecValTok{1}
            \KeywordTok{if}\NormalTok{ suffix[j] != s[k] \{}
\NormalTok{                suffix = suffix[j+}\DecValTok{1}\NormalTok{:]}
                \KeywordTok{break}
\NormalTok{            \}}
\NormalTok{        \}}
\NormalTok{    \}}
    \KeywordTok{return}\NormalTok{ suffix}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}


\end{document}
